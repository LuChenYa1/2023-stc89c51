C51 COMPILER V9.59.0.0   UART                                                              04/05/2023 14:40:22 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN .\Objects\UART.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE UART.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\UART
                    -.lst) OBJECT(.\Objects\UART.obj)

line level    source

   1          #include <REGX51.H>
   2          
   3          
   4          typedef  unsigned char uchar;
   5          
   6          
   7          /**
   8            * @brief  ÉèÖÃ´®¿Ú½ÓÊÕÄ£Ê½£¬Ò²ÄÜ·¢ËÍ
   9            * @param  ÎÞ
  10            * @retval ÎÞ
  11            */
  12          void UART_Init(void)      //4800bps@11.0592MHz
  13          {
  14   1      //                            //0x50±È0x40¶àÁËREN=1,ÔÊÐí½ÓÊÕÊý¾Ý
  15   1      //      SCON = 0x50;          //´®¿ÚÄ£Ê½1£¨³£ÓÃ£©£¬°ËÎ»Êý¾Ý£¬¿É±ä²¨ÌØÂÊ£¬ºÍ¶¨Ê±Æ÷Ä£Ê½2£¨°ËÎ»×Ô¶¯ÖØ×°£©²»ÊÇÒ»¸ö¶
             -«Î÷
  16   1      //      PCON |=0x80;          //×î¸ßÎ»ÖÃÒ»£¬ÆäËûÎ»²»±ä£¬²¨ÌØÂÊ¼Ó±¶£¨±¾À´ÊÇÎªÁË¼õÐ¡Îó²î£¬µ«ÕâÀïÒÑ¾­ÎÞÎó²î£¬¿É²»¼
             -Ó±¶£©
  17   1      //      //      AUXR &= 0xBF;     //¸ß¼¶¹¦ÄÜ£¬¸ÃÐÍºÅµ¥Æ¬»úÃ»ÓÐ  
  18   1      //      //      AUXR &= 0xFE;     //µ÷12TºÍ¶¨Ê±Æ÷1
  19   1      //      TMOD &=0x0F;          //¸ßËÄÎ»ÇåÁã£¬µÍËÄÎ»²»±ä£¬µ÷¶¨Ê±Æ÷1
  20   1      //    TMOD |=0x20;          //µ÷¶¨Ê±Æ÷1µÄÄ£Ê½¶þ£¬°ËÎ»×Ô¶¯ÖØ×°Ä£Ê½
  21   1      //      TL1=0xF4;             //ÉèÖÃ¶¨Ê±³õÖµ
  22   1      //      TH1=0xF4;             //Éè¶¨¶¨Ê±Æ÷ÖØ×°Öµ
  23   1      //      ET1=0;                //½ûÖ¹¶¨Ê±Æ÷1ÖÐ¶Ï£¬Ö»Ìá¹©¶¨Ê±¹¦ÄÜ£¬ÖÐ¶ÏÃ»ÓÐÓÃ
  24   1      //      TR1=1;                //Æô¶¯¶¨Ê±Æ÷
  25   1      //      //¶ÀÊôÓÚÐèÒª½ÓÊÜÊý¾ÝµÄÊ±ºòµÄÅäÖÃ
  26   1      //      EA=1;                 //¿ªÆôÖÐ¶Ï×Ü¿ª¹Ø
  27   1      //      ES=1;                 //¿ªÆô´®¿ÚÖÐ¶Ï
  28   1              
  29   1       //4800bps,²»¼Ó±¶£¬°ËÎ»×Ô¶¯ÖØÔØ
  30   1       //°¡°¡°¡ÅªÁËºÃ¾Ã!!!!!!
  31   1              PCON |= 0x80;            
  32   1              SCON = 0x50;             
  33   1              TMOD &= 0x0F;            
  34   1              TMOD |= 0x20;            
  35   1              TL1 = 0xFA;              
  36   1              TH1 = 0xFA;              
  37   1              ET1 = 0;                 
  38   1              TR1 = 1;                 
  39   1              EA=1;                 //¿ªÆôÖÐ¶Ï×Ü¿ª¹Ø
  40   1              ES=1;                 //¿ªÆô´®¿ÚÖÐ¶Ï
  41   1              
  42   1      
  43   1      }
  44          //¶¨Ê±Æ÷1ÖÐ¶ÏµÄ´¥·¢Ìõ¼þÊÇÊ±¼äµ½ÁË£¬¶¨Ê±½áÊø£¬¶¨Ê±Æ÷1ÓÃÀ´ÅäÖÃ²¨ÌØÂÊ£¬Ã»ÓÐ±ØÒª¿ªÆôÖÐ¶Ï
  45          //´®¿ÚÖÐ¶ÏµÄ´¥·¢Ìõ¼þÊÇ½ÓÊÕÊý¾Ý»òÕß·¢ËÍÊý¾Ý
  46          
  47          
  48          
  49          /**
  50            * @brief  ÓÉ´®¿ÚÏòµçÄÔ·¢ËÍÒ»¸öÊý×Ö
  51            * @param  Êý×Ö×Ö·û
  52            * @retval ÎÞ
C51 COMPILER V9.59.0.0   UART                                                              04/05/2023 14:40:22 PAGE 2   

  53            */
  54          void UART_SendByte(uchar byte)
  55          {
  56   1              ES = 0;
  57   1              SBUF=byte;                    //SBUFÓÐÁ½¸ö£¬Ò»¸öÊÇ·¢ËÍÇø£¬Ò»¸öÊÇ½ÓÊÜÇø£¬¿Õ¼ä²»Ò»Ñù£¬µ«Õ¼ÓÃÍ¬Ò»¸öµØÖ·
  58   1              while(TI==0);
  59   1              TI=0;                         //Ò»µ©·¢ËÍ£¬Á¢¼´Èí¼þ¸´Î»
  60   1              ES = 1;
  61   1      }
  62          
  63          
  64          
  65          
  66           /**
  67            * @brief  ´®¿ÚÖÐ¶Ïº¯ÊýÄ£°å
  68            * @param  ÎÞ
  69            * @retval ÎÞ
  70            */
  71          //void UART_Routine()   interrupt 4 //´®¿ÚÖÐ¶Ï¶ÔÓ¦ÖÐ¶ÏºÅ
  72          //{
  73          //      if(RI==1)                     //·¢ËÍºÍ½ÓÊÕÖÐ¶ÏÕ¼ÓÃµÄÊÇÒ»¸öÍ¨µÀ£¬¶¼»á´¥·¢ÖÐ¶Ïº¯Êý£¬¼ÓifÅÐ¶Ï·ÀÖ¹Îó´¥
  74          //      {
  75          //              RI=0;                     //£¨ÊÖ¶¯£©Èí¼þ¸´Î»
  76          //      }
  77          //}
  78          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     39    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
