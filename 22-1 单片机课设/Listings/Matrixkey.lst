C51 COMPILER V9.59.0.0   MATRIXKEY                                                         12/26/2023 20:08:27 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MATRIXKEY
OBJECT MODULE PLACED IN .\Objects\Matrixkey.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE Matrixkey.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Li
                    -stings\Matrixkey.lst) OBJECT(.\Objects\Matrixkey.obj)

line level    source

   1           #include <REGX51.H>
   2           #include <delay.h>
   3           
   4           //å®šæ—¶å™¨æ‰«æçŸ©é˜µé”®ç›˜
   5           unsigned char Scan_MatrixKeyNum;
   6           /**
   7            * @brief  çŸ©é˜µé”®ç›˜è¯»å–æŒ‰é”®é”®ç 
   8            * @param  æ— 
   9            * @retval é”®ç KeyNum
  10            */  
  11          unsigned char MatrixKey_GetState(void)
  12           {
  13   1               //åˆ—æ‰«æ
  14   1               unsigned char MatrixKeyNum = 0;//è¿™ä¸€æ­¥èµ‹å€¼0å¾ˆé‡è¦ï¼Œä¸èƒ½çœç•¥
  15   1               P1=0xff;     //å…¨éƒ¨å¤ä½
  16   1               P1_0=0;      //ç¡®å®šæ‰«æåˆ—æ•°          
  17   1               if(P1_4==0){MatrixKeyNum=16;}
  18   1               if(P1_5==0){MatrixKeyNum=12;}
  19   1               if(P1_6==0){MatrixKeyNum=8;}
  20   1               if(P1_7==0){MatrixKeyNum=4;}
  21   1               
  22   1               
  23   1               P1=0xff;
  24   1               P1_1=0;
  25   1               if(P1_4==0){MatrixKeyNum=15;}
  26   1               if(P1_5==0){MatrixKeyNum=11;}
  27   1               if(P1_6==0){MatrixKeyNum=7;}
  28   1               if(P1_7==0){MatrixKeyNum=3;}
  29   1               
  30   1               P1=0xff;
  31   1               P1_2=0;
  32   1               if(P1_4==0){MatrixKeyNum=14;}
  33   1               if(P1_5==0){MatrixKeyNum=10;}
  34   1               if(P1_6==0){MatrixKeyNum=6;}
  35   1               if(P1_7==0){MatrixKeyNum=2;}
  36   1               
  37   1               P1=0xff;
  38   1               P1_3=0;
  39   1               if(P1_4==0){MatrixKeyNum=13;}
  40   1               if(P1_5==0){MatrixKeyNum=9;}
  41   1               if(P1_6==0){MatrixKeyNum=5;}
  42   1               if(P1_7==0){MatrixKeyNum=1;}
  43   1                
  44   1               return MatrixKeyNum;
  45   1       }
  46          
  47           /**
  48            * @brief  ä¸­æ–­æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼ŒåŠŸèƒ½æ˜¯æ£€æµ‹æŒ‰é”®è½ä¸‹å¹¶è¿”å›ç›¸åº”çš„å€¼ï¼Œå»é™¤äº†åŸæ¥ç
             -š„delayå’Œæ­»å¾ªç¯
  49            * @param  æ— 
  50            * @retval æ— 
  51            */
  52          void MatrixKey_Loop(void)
  53          {
C51 COMPILER V9.59.0.0   MATRIXKEY                                                         12/26/2023 20:08:27 PAGE 2   

  54   1              static unsigned char laststate,nowstate;
  55   1              laststate = nowstate;
  56   1              nowstate = MatrixKey_GetState();
  57   1              //æ›´æ¢10ä½ç½®å¯ä»¥æŒ‰ä¸‹å³å˜ï¼Œä¸éœ€æ¾æ‰‹
  58   1              if(laststate==1&&nowstate==0)Scan_MatrixKeyNum = 1;     
  59   1              else if(laststate==0 && nowstate == 2 )Scan_MatrixKeyNum = 2;   
  60   1              else if(laststate==0 && nowstate == 3 )Scan_MatrixKeyNum = 3;   
  61   1              else if(laststate==0 && nowstate == 4 )Scan_MatrixKeyNum = 4;   
  62   1              else if(laststate==0 && nowstate == 5 )Scan_MatrixKeyNum = 5;   
  63   1              else if(laststate==0 && nowstate == 6 )Scan_MatrixKeyNum = 6;   
  64   1              else if(laststate==0 && nowstate == 7 )Scan_MatrixKeyNum = 7;   
  65   1              else if(laststate==0 && nowstate == 8 )Scan_MatrixKeyNum = 8;   
  66   1              else if(laststate==0 && nowstate == 9 )Scan_MatrixKeyNum = 9;   
  67   1              else if(laststate==0 && nowstate == 10)Scan_MatrixKeyNum = 10;  
  68   1              else if(laststate==0 && nowstate == 11)Scan_MatrixKeyNum = 11;  
  69   1              else if(laststate==0 && nowstate == 12)Scan_MatrixKeyNum = 12;  
  70   1              else if(laststate==0 && nowstate == 13)Scan_MatrixKeyNum = 13;  
  71   1              else if(laststate==0 && nowstate == 14)Scan_MatrixKeyNum = 14;  
  72   1              else if(laststate==0 && nowstate == 15)Scan_MatrixKeyNum = 15;  
  73   1              else if(laststate==0 && nowstate == 16)Scan_MatrixKeyNum = 16;  
  74   1      }
  75          /**
  76            * @brief  è¿”å›æŒ‰é”®é”®ç 
  77            * @param  æ— 
  78            * @retval é”®ç 
  79            */
  80          unsigned char MatrixKey(void)
  81          {
  82   1              unsigned char temp;
  83   1              temp = Scan_MatrixKeyNum;     //è¿”å›æŒ‰é”®å€¼å‰å¯¹Scan_KeyNumæ¸…é›¶ï¼Œé˜²æ­¢ä¸æŒ‰ä¸‹æ—¶è¿”å›åŸå€¼
  84   1              Scan_MatrixKeyNum = 0;
  85   1              return temp;
  86   1      }
  87          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    411    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      3    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
