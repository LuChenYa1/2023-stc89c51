C51 COMPILER V9.59.0.0   DS18B20                                                           04/15/2023 08:06:59 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE DS18B20
OBJECT MODULE PLACED IN .\Objects\DS18B20.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE DS18B20.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\D
                    -S18B20.lst) OBJECT(.\Objects\DS18B20.obj)

line level    source

   1          #include <REGX51.H>
   2          #include "OneWire.h"
   3           
   4           
   5          #define DS18B20_SKIP_ROM                0xCC
   6          #define DS18B20_CONVERT_T               0x44
   7          #define DS18B20_READ_SCRATCHPAD 0xBE
   8          
   9          
  10          /**
  11            * @brief  变换并更新温度
  12            * @param  无
  13            * @retval 无
  14            */
  15          void DS18B20_Convert_T(void)
  16          {
  17   1              OneWire_Init();
  18   1              OneWire_SendByte(DS18B20_SKIP_ROM);
  19   1              OneWire_SendByte(DS18B20_CONVERT_T);
  20   1      }
  21          
  22          
  23          /**
  24            * @brief  读取温度
  25            * @param  无
  26            * @retval 读取的温度值
  27            */
  28          float DS18B20_Read_T(void)
  29          {
  30   1              unsigned char TLSB,TMSB;//低位，高位
  31   1              int temp;//占两个字节
  32   1              float T; //实际温度值
  33   1              OneWire_Init(); 
  34   1              OneWire_SendByte(DS18B20_SKIP_ROM);
  35   1              OneWire_SendByte(DS18B20_READ_SCRATCHPAD);
  36   1              TLSB=OneWire_ReceiveByte();
  37   1              TMSB=OneWire_ReceiveByte();
  38   1              temp=(TMSB<<8)|TLSB;
  39   1              T=temp/16.0;
  40   1              return T;
  41   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     56    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
