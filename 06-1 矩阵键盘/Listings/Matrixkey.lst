C51 COMPILER V9.59.0.0   MATRIXKEY                                                         03/03/2024 14:49:08 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MATRIXKEY
OBJECT MODULE PLACED IN .\Objects\Matrixkey.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE Matrixkey.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings
                    -\Matrixkey.lst) OBJECT(.\Objects\Matrixkey.obj)

line level    source

   1           #include <REGX51.H>
   2           #include <delay.h>
   3           #include <LCD1602.h>
   4           
   5           /**
   6            * @brief  矩阵键盘读取按键键码
   7            * @param  无
   8            * @retval 键码KeyNum
   9                  按下并松开后重新赋值并显示
  10            */  
  11           int Matrixkey()
  12           {
  13   1               //列扫描
  14   1               unsigned int KeyNum;
  15   1               P1=0xff;     //全部复位
  16   1               P1_0=0;      //确定扫描列数          
  17   1               if(P1_4==0){delay(20);while(P1_4==0);delay(20);KeyNum=16;}
  18   1               if(P1_5==0){delay(20);while(P1_5==0);delay(20);KeyNum=12;}
  19   1               if(P1_6==0){delay(20);while(P1_6==0);delay(20);KeyNum=8;}
  20   1               if(P1_7==0){delay(20);while(P1_7==0);delay(20);KeyNum=4;}
  21   1               
  22   1               
  23   1               P1=0xff;
  24   1               P1_1=0;
  25   1               if(P1_4==0){delay(20);while(P1_4==0);delay(20);KeyNum=15;}
  26   1               if(P1_5==0){delay(20);while(P1_5==0);delay(20);KeyNum=11;}
  27   1               if(P1_6==0){delay(20);while(P1_6==0);delay(20);KeyNum=7;}
  28   1               if(P1_7==0){delay(20);while(P1_7==0);delay(20);KeyNum=3;}
  29   1               
  30   1               P1=0xff;
  31   1               P1_2=0;
  32   1               if(P1_4==0){delay(20);while(P1_4==0);delay(20);KeyNum=14;}
  33   1               if(P1_5==0){delay(20);while(P1_5==0);delay(20);KeyNum=10;}
  34   1               if(P1_6==0){delay(20);while(P1_6==0);delay(20);KeyNum=6;}
  35   1               if(P1_7==0){delay(20);while(P1_7==0);delay(20);KeyNum=2;}
  36   1               
  37   1               P1=0xff;
  38   1               P1_3=0;
  39   1               if(P1_4==0){delay(20);while(P1_4==0);delay(20);KeyNum=13;}
  40   1               if(P1_5==0){delay(20);while(P1_5==0);delay(20);KeyNum=9;}
  41   1               if(P1_6==0){delay(20);while(P1_6==0);delay(20);KeyNum=5;}
  42   1               if(P1_7==0){delay(20);while(P1_7==0);delay(20);KeyNum=1;}
  43   1               
  44   1               
  45   1               return KeyNum;
  46   1       }
  47          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    441    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
C51 COMPILER V9.59.0.0   MATRIXKEY                                                         03/03/2024 14:49:08 PAGE 2   

   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
