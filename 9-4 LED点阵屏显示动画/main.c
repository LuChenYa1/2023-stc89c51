#include <REGX51.H>
#include "MatrixLED.h"

uchar a;
uchar offset;    //偏移量
uchar count;     //for循环计数
void main ()
{
	void MatrixLED_Init();
	//code 将一段常用、占用字节多、一般不改变的数据存入flash
	//存入后无法更改，因其已为常量
	uchar code smile[48]={0x3C,0x42,0xA9,0x85,0x85,0xA9,0x42,0x3C,
						  0x3C,0x42,0xA9,0x85,0x85,0xA9,0x42,0x3C,
						  0x3C,0x42,0xA5,0x85,0x85,0xA5,0x42,0x3C,
						  0x3C,0x42,0xA5,0x85,0x85,0xA5,0x42,0x3C,
						  0x3C,0x42,0xA5,0x89,0x89,0xA5,0x42,0x3C,
						  0x3C,0x42,0xA5,0x89,0x89,0xA5,0x42,0x3C};
 
	uchar code Hello[32]={0x00,0xFF,0x08,0x08,0x08,0xFF,0x00,0x0E,
						 0x15,0x15,0x15,0x0A,0x00,0xFE,0x01,0x01,
						 0x02,0x00,0xFE,0x01,0x01,0x02,0x00,0x1E,
						 0x21,0x21,0x1E,0x00,0x00,0x00,0x00,0x00};
    //文字取模，显示Hello，纵向取模，按列取数据
	uchar code zxf[64]={0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x10,0x20,0x54,0xFF,0x55,0x56,0x00,0x1C,
						0x14,0xFF,0x14,0x1C,0x00,0x00,0x08,0x10,
						0x24,0x02,0x01,0xFF,0x00,0x20,0x10,0x08,
						0x00,0x21,0x22,0x24,0xA8,0x7A,0x29,0x2A,
						0x2C,0x20,0x00,0x43,0x45,0x49,0x51,0x61,
						0x00,0x41,0x22,0x14,0x08,0x14,0x22,0x41,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
	//前面加0，后面也加0，目的是让数据衔接流畅不突兀
	while (1)
	{
		for(a = 0;a < 8;a++)
		{
			MatrixLED_ShowColumn(a, smile[a+offset]);
		}
		count++;
		if(count == 10)
		{
			count = 0;
			offset += 8;
			if(offset == 40)     //不是48，初始时屏幕就占了八位，应该减去八
			{
				offset = 0;
			}
		}
	}
}

